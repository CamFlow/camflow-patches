dependencies:
  pre:
    - gem install package_cloud

test:
  override:
    - sudo apt-get update -qq
    - sudo apt-get -y install build-essential
    - sudo apt-get -y install libncurses-dev cmake clang g++ wget git libssl-dev
    - sudo apt-get -y install bc nano patch mosquitto
    - sudo apt-get -y install libelf-dev sparse flawfinder
    - sudo apt-get -y install libedit-dev
    - sudo apt-get -y install rpm
    - cd ./v0.3.1 && make prepare
    - cd ./v0.3.1 && make config_circle
    - cd ./v0.3.1 && make rpm:
      timeout: 1200

deployment:
  production:
    branch: master
    commands:
      - cd ./v0.3.1 && make publish
