dependencies:
  pre:
    - gem install package_cloud
    - sudo apt-get update -qq
    - sudo apt-get -y install build-essential
    - sudo apt-get -y install libncurses-dev cmake clang g++ wget git libssl-dev
    - sudo apt-get -y install bc nano patch mosquitto
    - sudo apt-get -y install libelf-dev sparse flawfinder
    - sudo apt-get -y install libedit-dev
    - sudo apt-get -y install rpm

checkout:
  post:
    cd ./v0.3.1 && make prepare && make config_circle && make rpm

deployment:
  production:
    branch: master
    commands:
      - cd ./v0.3.1/output && package_cloud push tfjmp/camflow/fedora/25 kernel-4.11.2camflow_0.3.1-2.src.rpm
      - cd ./v0.3.1/output && package_cloud push tfjmp/camflow/fedora/25 kernel-4.11.2camflow_0.3.1-2.x86_64.rpm
      - cd ./v0.3.1/output && package_cloud push tfjmp/camflow/fedora/25 kernel-devel-4.11.2camflow_0.3.1-2.x86_64.rpm
      - cd ./v0.3.1/output && package_cloud push tfjmp/camflow/fedora/25 kernel-headers-4.11.2camflow_0.3.1-2.x86_64.rpm
